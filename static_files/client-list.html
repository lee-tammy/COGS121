<!DOCTYPE HTML>

<html>

<head>
<script src="jquery-3.3.1.min.js"></script>
<script type="text/javascript">

let clientNames = "";
let clientUsernames;

$(document).ready(() => { //runs anon fxn when doc is fully loaded

  $.ajax({ //the one parameter that ajax takes has many elements
      url: "client-list",//the url we want to access
      type: "GET", //type
      dataType: "json", //parses json into native js object
      success: (users) => {//when ajax succeeds
        clientUsernames = users;
      }
  });

  /*clicked items*/
  $("#see-more").click(() => {
    clientUsernames.forEach(createClientList);
    function createClientList(value) {
      $.ajax({
        url: "/client-profile/" + value,
        type: "GET",
        dataType: "json",
        success: (currentName) => {
          clientNames += '<a href="/client-profile.html">';
          buildClientList(currentName.firstName + " " + currentName.lastName + "</a><br>");
          $("#client-names").html(clientNames);
        }
      });
    };

    function buildClientList(name) {
      clientNames += name;
    };

    //$("#client-names").html(clientNames);
  }
  );
});

</script>

</head>

  <body>
    <div id="top-menu">
      <a id="home-button" href="therapist-home.html">Home Icon</a>
      <a id="add-client" href="add-client.html">Add Another Client</a>
    </div>

    <div>
      <a id="client1" href="client-profile.html">Client Example</a><br>
      <button id="see-more">See clients</a>

    </div>

    <div id="client-names"></div>
  </body>

</html>
